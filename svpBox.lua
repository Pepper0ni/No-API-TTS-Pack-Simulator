setName="Scarlet & Violet Promos"
DeckID=15741
date="2023/01/01"
setID="svp"
cardData={["001"]={
 name="Sprigatito",
 GMN="00906000",
 typ="11",
 rar="P"
},
["002"]={
 name="Fuecoco",
 GMN="00909000",
 typ="22",
 rar="P"
},
["003"]={
 name="Quaxly",
 GMN="00912000",
 typ="33",
 rar="P"
},
["004"]={
 name="Mimikyu ex",
 GMN="00778000",
 typ="55",
 rar="P"
},
["005"]={
 name="Quaquaval",
 GMN="00914000",
 typ="33",
 rar="P"
},
["006"]={
 name="Pawmot",
 GMN="00922000",
 typ="44",
 rar="P"
},
["007"]={
 name="Hawlucha",
 GMN="00701000",
 typ="66",
 rar="P"
},
["008"]={
 name="Revavroom",
 GMN="00966000",
 typ="88",
 rar="P"
},
["009"]={
 name="Spidops",
 GMN="00918000",
 typ="11",
 rar="P"
},
["010"]={
 name="Espathra",
 GMN="00956000",
 typ="55",
 rar="P"
},
["011"]={
 name="Arcanine",
 GMN="00059000",
 typ="22",
 rar="P"
},
["012"]={
 name="Dondozo",
 GMN="00977000",
 typ="33",
 rar="P"
},
["013"]={
 name="Miraidon",
 GMN="01008000",
 typ="44",
 rar="P"
},
["014"]={
 name="Koraidon",
 GMN="01007000",
 typ="66",
 rar="P"
},
["015"]={
 name="Flaaffy",
 GMN="00180000",
 typ="44",
 rar="P"
},
["016"]={
 name="Ampharos ex",
 GMN="00181000",
 typ="44",
 rar="P"
},
["017"]={
 name="Lucario ex",
 GMN="00448000",
 typ="66",
 rar="P"
},
["018"]={
 name="Cyclizar ex",
 GMN="00967000",
 typ="121",
 rar="P"
},
["019"]={
 name="Baxcalibur",
 GMN="00998000",
 typ="33",
 rar="P"
},
["020"]={
 name="Tinkaton",
 GMN="00959000",
 typ="55",
 rar="P"
},
["021"]={
 name="Murkrow",
 GMN="00198000",
 typ="77",
 rar="P"
},
["022"]={
 name="Pelipper",
 GMN="00279000",
 typ="121",
 rar="P"
},
["023"]={
 name="Smoliv",
 GMN="00928000",
 typ="11",
 rar="P"
},
["024"]={
 name="Growlithe",
 GMN="00058000",
 typ="22",
 rar="P"
},
["025"]={
 name="Tinkatink",
 GMN="00957000",
 typ="55",
 rar="P"
},
["026"]={
 name="Varoom",
 GMN="00965000",
 typ="88",
 rar="P"
},
["027"]={
 name="Pikachu",
 GMN="00025000",
 typ="44",
 rar="P"
},
["028"]={
 name="Miraidon ex",
 GMN="01008000",
 typ="44",
 rar="P"
},
["029"]={
 name="Koraidon ex",
 GMN="01007000",
 typ="66",
 rar="P"
},
["030"]={
 name="Chien-Pao ex",
 GMN="01002000",
 typ="33",
 rar="P"
},
["031"]={
 name="Tinkaton ex",
 GMN="00959000",
 typ="55",
 rar="P"
},
["032"]={
 name="Annihilape ex",
 GMN="00057500",
 typ="66",
 rar="P"
},
["033"]={
 name="Meowscarada ex",
 GMN="00908000",
 typ="11",
 rar="P"
},
["034"]={
 name="Skeledirge ex",
 GMN="00911000",
 typ="22",
 rar="P"
},
["035"]={
 name="Quaquaval ex",
 GMN="00914000",
 typ="33",
 rar="P"
},
["036"]={
 name="Palafin",
 GMN="00964000",
 typ="33",
 rar="P"
},
["037"]={
 name="Cleffa",
 GMN="00034500",
 typ="55",
 rar="P"
},
["038"]={
 name="Togekiss",
 GMN="00176500",
 typ="55",
 rar="P"
},
["039"]={
 name="Mawile",
 GMN="00303000",
 typ="88",
 rar="P"
},
["040"]={
 name="Pawmi",
 GMN="00921000",
 typ="44",
 rar="P"
},
["041"]={
 name="Paldean Wooper",
 GMN="00194000",
 typ="77",
 rar="P"
},
["042"]={
 name="Houndstone",
 GMN="00972000",
 typ="55",
 rar="P"
},
["043"]={
 name="Eevee",
 GMN="00133000",
 typ="121",
 rar="P"
},
["044"]={
 name="Charmander",
 GMN="00004000",
 typ="22",
 rar="P"
},
["045"]={
 name="Paradise Resort",
 GMN="50000000",
 typ="500",
 rar="P"
},
["046"]={
 name="Bulbasaur",
 GMN="00001000",
 typ="11",
 rar="P"
},
["047"]={
 name="Charmander",
 GMN="00004000",
 typ="22",
 rar="P"
},
["048"]={
 name="Squirtle",
 GMN="00007000",
 typ="33",
 rar="P"
},
["049"]={
 name="Zapdos ex",
 GMN="00145000",
 typ="44",
 rar="P"
},
["050"]={
 name="Alakazam ex",
 GMN="00065000",
 typ="55",
 rar="P"
},
["051"]={
 name="Snorlax",
 GMN="00143000",
 typ="121",
 rar="P"
},
["052"]={
 name="Mewtwo",
 GMN="00150000",
 typ="55",
 rar="P"
},
["053"]={
 name="Mew ex",
 GMN="00151000",
 typ="55",
 rar="P"
},
["054"]={
 name="Greninja ex",
 GMN="00658000",
 typ="33",
 rar="P"
},
["055"]={
 name="Kangaskhan ex",
 GMN="00115000",
 typ="121",
 rar="P"
},
["056"]={
 name="Charizard ex",
 GMN="00006000",
 typ="77",
 rar="P"
},
["057"]={
 name="Chi-Yu",
 GMN="01004000",
 typ="22",
 rar="P"
},
["058"]={
 name="Iron Bundle",
 GMN="00991000",
 typ="33",
 rar="P"
},
["059"]={
 name="Xatu",
 GMN="00178000",
 typ="55",
 rar="P"
},
["060"]={
 name="Aegislash",
 GMN="00681000",
 typ="88",
 rar="P"
},
["061"]={
 name="Pineco",
 GMN="00204000",
 typ="11",
 rar="P"
},
["062"]={
 name="Sinistea",
 GMN="00854000",
 typ="55",
 rar="P"
},
["063"]={
 name="Cetitan",
 GMN="00975000",
 typ="33",
 rar="P"
},
["064"]={
 name="Arctibax",
 GMN="00997000",
 typ="33",
 rar="P"
},
["065"]={
 name="Scream Tail",
 GMN="00985000",
 typ="55",
 rar="P"
},
["066"]={
 name="Iron Bundle",
 GMN="00991000",
 typ="33",
 rar="P"
},
["067"]={
 name="Roaring Moon ex",
 GMN="01005000",
 typ="77",
 rar="P"
},
["068"]={
 name="Iron Valiant ex",
 GMN="01006000",
 typ="55",
 rar="P"
},
["069"]={
 name="Fidough",
 GMN="00926000",
 typ="55",
 rar="P"
},
["070"]={
 name="Greavard",
 GMN="00971000",
 typ="55",
 rar="P"
},
["071"]={
 name="Maschiff",
 GMN="00942000",
 typ="77",
 rar="P"
},
["072"]={
 name="Great Tusk ex",
 GMN="00984000",
 typ="66",
 rar="P"
},
["073"]={
 name="Iron Treads ex",
 GMN="00990000",
 typ="88",
 rar="P"
},
["074"]={
 name="Charizard ex",
 GMN="00006000",
 typ="77",
 rar="P"
},
["075"]={
 name="Mimikyu",
 GMN="00778000",
 typ="55",
 rar="P"
},
["076"]={
 name="Sprigatito",
 GMN="00906000",
 typ="11",
 rar="P"
},
["077"]={
 name="Floragato",
 GMN="00907000",
 typ="11",
 rar="P"
},
["078"]={
 name="Meowscarada ex",
 GMN="00908000",
 typ="11",
 rar="P"
},
["079"]={
 name="Fuecoco",
 GMN="00909000",
 typ="22",
 rar="P"
},
["080"]={
 name="Crocalor",
 GMN="00910000",
 typ="22",
 rar="P"
},
["081"]={
 name="Skeledirge ex",
 GMN="00911000",
 typ="22",
 rar="P"
},
["082"]={
 name="Quaxly",
 GMN="00912000",
 typ="33",
 rar="P"
},
["083"]={
 name="Quaxwell",
 GMN="00913000",
 typ="33",
 rar="P"
},
["084"]={
 name="Quaquaval ex",
 GMN="00914000",
 typ="33",
 rar="P"
},
["085"]={
 name="Pikachu with Grey Felt Hat",
 GMN="00025000",
 typ="44",
 rar="P"
},
["086"]={
 name="Mabosstiff ex",
 GMN="00943000",
 typ="77",
 rar="P"
},
["087"]={
 name="Sprigatito ex",
 GMN="00906000",
 typ="11",
 rar="P"
},
["088"]={
 name="Pikachu",
 GMN="00025000",
 typ="44",
 rar="P"
},
["089"]={
 name="Feraligatr",
 GMN="00160000",
 typ="33",
 rar="P"
},
["090"]={
 name="Metang",
 GMN="00375000",
 typ="88",
 rar="P"
},
["091"]={
 name="Koraidon",
 GMN="01007000",
 typ="110",
 rar="P"
},
["092"]={
 name="Miraidon",
 GMN="01008000",
 typ="110",
 rar="P"
},
["093"]={
 name="Carvanha",
 GMN="00318000",
 typ="33",
 rar="P"
},
["094"]={
 name="Bellibolt",
 GMN="00939000",
 typ="44",
 rar="P"
},
["095"]={
 name="Cleffa",
 GMN="00034500",
 typ="55",
 rar="P"
},
["096"]={
 name="Cyclizar",
 GMN="00967000",
 typ="121",
 rar="P"
},
["097"]={
 name="Flutter Mane",
 GMN="00987000",
 typ="55",
 rar="P"
},
["098"]={
 name="Iron Thorns",
 GMN="00995000",
 typ="44",
 rar="P"
},
["099"]={
 name="Shroodle",
 GMN="00944000",
 typ="121",
 rar="P"
},
["100"]={
 name="Grafaiai ex",
 GMN="00945000",
 typ="121",
 rar="P"
},
["101"]={
 name="Pikachu",
 GMN="00025000",
 typ="44",
 rar="P"
},
["102"]={
 name="Oddish",
 GMN="00043000",
 typ="11",
 rar="P"
},
["103"]={
 name="Houndoom ex",
 GMN="00229000",
 typ="77",
 rar="P"
},
["104"]={
 name="Melmetal ex",
 GMN="00809000",
 typ="88",
 rar="P"
},
["105"]={
 name="Armarouge ex",
 GMN="00936000",
 typ="22",
 rar="P"
},
["106"]={
 name="Pikachu ex",
 GMN="00025000",
 typ="44",
 rar="P"
},
["107"]={
 name="Mareep",
 GMN="00179000",
 typ="44",
 rar="P"
},
["108"]={
 name="Flaaffy",
 GMN="00180000",
 typ="44",
 rar="P"
},
["109"]={
 name="Ampharos",
 GMN="00181000",
 typ="44",
 rar="P"
},
["110"]={
 name="Darkrai ex",
 GMN="00491000",
 typ="77",
 rar="P"
},
["111"]={
 name="Pawniard",
 GMN="00624000",
 typ="77",
 rar="P"
},
["112"]={
 name="Bisharp",
 GMN="00625000",
 typ="77",
 rar="P"
},
["113"]={
 name="Kingambit",
 GMN="00625500",
 typ="77",
 rar="P"
},
["114"]={
 name="Picnicker",
 GMN="40000000",
 typ="500",
 rar="P"
},
["115"]={
 name="Thwackey",
 GMN="00811000",
 typ="11",
 rar="P"
},
["116"]={
 name="Infernape",
 GMN="00392000",
 typ="22",
 rar="P"
},
["117"]={
 name="Froslass",
 GMN="00362500",
 typ="33",
 rar="P"
},
["118"]={
 name="Tatsugiri",
 GMN="00978000",
 typ="110",
 rar="P"
},
["119"]={
 name="Toxel",
 GMN="00848000",
 typ="44",
 rar="P"
},
["120"]={
 name="Pupitar",
 GMN="00247000",
 typ="66",
 rar="P"
},
["121"]={
 name="Revavroom",
 GMN="00966000",
 typ="88",
 rar="P"
},
["122"]={
 name="Snorlax",
 GMN="00143000",
 typ="121",
 rar="P"
},
["123"]={
 name="Teal Mask Ogerpon",
 GMN="01017000",
 typ="11",
 rar="P"
},
["124"]={
 name="Iono",
 GMN="40000000",
 typ="500",
 rar="P"
},
["125"]={
 name="Armarouge ex",
 GMN="00936000",
 typ="22",
 rar="P"
},
["126"]={
 name="Palafin ex",
 GMN="00964000",
 typ="33",
 rar="P"
},
["127"]={
 name="Walking Wake ex",
 GMN="01009000",
 typ="33",
 rar="P"
},
["128"]={
 name="Iron Leaves ex",
 GMN="01010000",
 typ="11",
 rar="P"
},
["129"]={
 name="Pecharunt",
 GMN="01025000",
 typ="77",
 rar="P"
},
["130"]={
 name="Kingambit",
 GMN="00625500",
 typ="88",
 rar="P"
},
["131"]={
 name="Kingdra ex",
 GMN="00117500",
 typ="33",
 rar="P"
},
["132"]={
 name="Greninja ex",
 GMN="00658000",
 typ="33",
 rar="P"
},
["133"]={
 name="Ledian",
 GMN="00166000",
 typ="11",
 rar="P"
},
["134"]={
 name="Crabominable",
 GMN="00740000",
 typ="33",
 rar="P"
},
["135"]={
 name="Drifblim",
 GMN="00426000",
 typ="55",
 rar="P"
},
["136"]={
 name="Bouffalant",
 GMN="00626000",
 typ="121",
 rar="P"
},
["137"]={
 name="Horsea",
 GMN="00116000",
 typ="33",
 rar="P"
},
["138"]={
 name="Porygon2",
 GMN="00137300",
 typ="121",
 rar="P"
},
["139"]={
 name="Latias",
 GMN="00380000",
 typ="55",
 rar="P"
},
["140"]={
 name="Tinkaton",
 GMN="00959000",
 typ="55",
 rar="P"
},
["141"]={
 name="Noctowl",
 GMN="00164000",
 typ="121",
 rar="P"
},
["142"]={
 name="Victini ex",
 GMN="00494000",
 typ="22",
 rar="P"
},
["143"]={
 name="Miraidon ex",
 GMN="01008000",
 typ="44",
 rar="P"
},
["144"]={
 name="Gouging Fire ex",
 GMN="00000000",
 typ="22",
 rar="P"
},
["145"]={
 name="Raging Bolt ex",
 GMN="00000000",
 typ="110",
 rar="P"
},
["146"]={
 name="Iron Crown ex",
 GMN="00000000",
 typ="55",
 rar="P"
},
["147"]={
 name="Iron Boulder ex",
 GMN="00000000",
 typ="66",
 rar="P"
},
["148"]={
 name="Miraidon",
 GMN="01008000",
 typ="44",
 rar="P"
},
["149"]={
 name="Pecharunt",
 GMN="00000000",
 typ="77",
 rar="P"
},
["150"]={
 name="Paradise Resort",
 GMN="50000000",
 typ="500",
 rar="P"
},
["151"]={
 name="Gouging Fire",
 GMN="00000000",
 typ="22",
 rar="P"
},
["152"]={
 name="Chien-Pao",
 GMN="01002000",
 typ="33",
 rar="P"
},
["153"]={
 name="Magneton",
 GMN="00082000",
 typ="44",
 rar="P"
},
["154"]={
 name="Indeedee",
 GMN="00876000",
 typ="55",
 rar="P"
},
["155"]={
 name="Wooper",
 GMN="00194000",
 typ="33",
 rar="P"
},
["156"]={
 name="Quagsire",
 GMN="00195000",
 typ="33",
 rar="P"
},
["157"]={
 name="Zapdos",
 GMN="00145000",
 typ="44",
 rar="P"
},
["158"]={
 name="Pachirisu",
 GMN="00417000",
 typ="44",
 rar="P"
},
["159"]={
 name="Magneton",
 GMN="00082000",
 typ="44",
 rar="P"
},
["160"]={
 name="Squawkabilly ex",
 GMN="00931000",
 typ="121",
 rar="P"
},
["161"]={
 name="Charizard ex",
 GMN="00006000",
 typ="22",
 rar="P"
},
["162"]={
 name="Houndstone ex",
 GMN="00972000",
 typ="55",
 rar="P"
},
["163"]={
 name="Cinderace ex",
 GMN="00815000",
 typ="22",
 rar="P"
},
["164"]={
 name="Lapras ex",
 GMN="00131000",
 typ="33",
 rar="P"
},
["165"]={
 name="Terapagos ex",
 GMN="01024000",
 typ="121",
 rar="P"
}}

function onObjectLeaveContainer(cont,leaving)
 if cont~=self then return end
end

function onLoad()
 setUpButtons()
 if not cardData then
  self.setLuaScript(self.getLuaScript()..cardString)
  self.Reload()
 end
end

function setUpButtons()
 local params={
 function_owner=self,
 width=3500,
 height=500,
 font_size=450,
 }
 butWrapper(params,{0,0.1,3},'Get Whole Set',"","getSet")
end

function butWrapper(params,pos,label,tool,func)
 params.position=pos
 params.label=label
 params.tooltip=tool
 params.click_function=func
 self.createButton(params)
end

function getSet(obj,color,alt)
 local spawnPos=self.positionToWorld({0,1,7})
 packData=getDeckData(spawnPos,self.getRotation(),false)
 for num,card in pairs(cardData) do
  addCard(num)
 end
 local deck=spawnObjectData({data=packData})
end

function getDeckData(spawnPos,cardRot,hands)
 return {Name="Deck",
  Transform={posX=spawnPos[1],posY=spawnPos[2],posZ=spawnPos[3],rotX=cardRot[1],rotY=cardRot[2],rotZ=cardRot[3],scaleX=1,scaleY=1,scaleZ=1},
  Hands=hands,
  DeckIDs={},
  CustomDeck={},
  ContainedObjects={}
 }
end

function getDeckID(num)
 return cardData[num].ID or DeckID+tonumber(num)
end

function addCard(num)
 packData.DeckIDs[#packData.DeckIDs+1]=getDeckID(num)*100
 packData.CustomDeck[getDeckID(num)]=getCustomData(num)
 packData.ContainedObjects[#packData.ContainedObjects+1]=getCardTable(packData.Transform,num)
end

function getCardTable(trans,num)
 local des=cardData[num].setName or setName
 --if cardData[num].num then
  des=des.." #"..num
 --end
 if cardData[num].rar then
  des=des.." "..cardData[num].rar
 end
 return{Name="CardCustom",
 Transform=trans,
 Nickname=cardData[num].name,
 Description=des,
 GMNotes=cardData[num].GMN,
 Memo=(cardData[num].date or date)..buildCardNumber(num,3),
 CardID=getDeckID(num)*100,
 CustomDeck={[getDeckID(num)]=getCustomData(num)},
 LuaScriptState=cardData[num].typ
}
end

function removeLeadingZeros(num)
 return string.format("%u", num);
end

function getCustomData(num)
 local image=cardData[num].image
 if not image then
  local ID=setID
  image="https://images.pokemontcg.io/"..ID.."/"..removeLeadingZeros(num).."_hires.png?count="..buildCardNumber(num,1)
 end
 return{FaceURL=image,
  BackURL=cardData[num].back or"https://steamusercontent-a.akamaihd.net/ugc/809997459557414686/9ABD9158841F1167D295FD1295D7A597E03A7487/",
  NumWidth=1,
  NumHeight=1,
  BackIsHidden=true
 }
end

function buildCardNumber(cardNum,minDigit)
 if cardNum then
  local numOnly=string.gsub(cardNum,"[^%d]","")
  if numOnly~=cardNum then
   local finalNum=(tonumber(numOnly)or 0)+500
   for c in cardNum:gmatch"[^%d]" do
    if c=="?"then c="}"end
    if c=="!"then c="{"end
    finalNum=string.byte(c)-65+finalNum
   end
   cardNum=tostring(finalNum)
  end
 else
  cardNum="0"
 end
 while #cardNum<minDigit do cardNum="0"..cardNum end
 return cardNum
end
